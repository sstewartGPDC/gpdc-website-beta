<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="The Georgia Public Defender Council provides constitutional defense services across Georgia, supporting public defenders and ensuring justice for all.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Georgia Public Defender Council</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css?v=13">
    <!-- Open Graph -->
    <meta property="og:title" content="Georgia Public Defender Council">
    <meta property="og:description" content="The Georgia Public Defender Council provides constitutional defense services across Georgia, supporting public defenders and ensuring justice for all.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gapubdef.org/">
    <meta property="og:image" content="https://cdn.prod.website-files.com/66c9595206b0d169d1677e69/66e9df4a3e925a89e1be2971_BlackGold%20-%20SYMBOL%20MARK.png">
    <meta property="og:site_name" content="Georgia Public Defender Council">
    <link rel="canonical" href="https://gapubdef.org/">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
    <!-- Page Transition Overlay -->
    <div class="page-transition" id="pageTransition"></div>

    <!-- Header (loaded dynamically) -->
    <div id="site-header"></div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-bg">
            <img src="https://cdn.prod.website-files.com/66c9595206b0d169d1677e69/66cb5572796c0ab0a8255dae_pexels-august-de-richelieu-4427626.jpg" alt="Legal professionals in discussion">
        </div>
        <div class="hero-content">
            <p class="label hero-label">HOME</p>
            <h1 class="hero-title">Defending Rights<br><em>Empowering Clients</em></h1>
            <div class="hero-actions">
                <a href="about.html" class="btn btn-primary">
                    <span>Learn About Us</span>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </a>
                <a href="find-defender.html" class="btn btn-outline" style="background: rgba(255, 255, 255, 0.25); border-color: white; color: white;">
                    <span>Find My Public Defender</span>
                </a>
            </div>
        </div>
        <div class="hero-scroll">
            <span>Scroll</span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M19 12l-7 7-7-7"/>
            </svg>
        </div>
    </section>

    <!-- From the Council — Editorial Newsroom -->
    <section class="editorial-newsroom">
        <div class="container">
            <div class="section-header centered fade-in">
                <p class="label">FROM THE COUNCIL</p>
                <h2 class="section-title">Newsroom</h2>
            </div>

            <!-- Featured Story — Hero -->
            <a href="articles/new-augusta-circuit-public-defender-sworn-in-as-kate-mason-retires.html" class="editorial-lead fade-in">
                <div class="editorial-lead-image">
                    <img loading="lazy" src="/images/uploads/1Q8A8034-2048x1365.jpg" alt="Retired Circuit Public Defender of the Augusta Judicial Circuit, Kate Mason, with Executive Director Omotayo Alli." style="object-position: center center">
                </div>
                <div class="editorial-lead-overlay">
                    <span class="editorial-badge">Featured</span>
                    <h2 class="editorial-lead-headline">New Augusta Circuit Public Defender Sworn in as Kate Mason Retires</h2>
                    <div class="editorial-lead-meta">
                        <span class="editorial-meta-category">Events</span>
                        <span class="editorial-meta-sep">&bull;</span>
                        <span class="editorial-meta-date">February 10, 2026</span>
                        <span class="editorial-meta-sep">&bull;</span>
                        <span class="editorial-meta-read">2 min read</span>
                    </div>
                    <p class="editorial-lead-excerpt">Katherine “Kate” Mason, a longtime Augusta public defender and former statewide leader with the Georgia Public Defender Council (GPDC), was honored at a retirement celebration. Lee Prescott brings more than two decades of public defense and leadership experience.</p>
                    <span class="editorial-lead-read-btn">Read Article <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></span>
                </div>
            </a>

            
            <!-- Secondary Stories -->
            <div class="editorial-secondary fade-in">
                <a href="articles/prescott-augusta-circuit.html" class="editorial-story">
                    <div class="editorial-story-image">
                        <img loading="lazy" src="https://gapubdef.org/wp-content/uploads/Prescott-Lee-1024x683.jpg" alt="Lee Prescott, new Circuit Public Defender for Augusta Circuit">
                    </div>
                    <div class="editorial-story-body">
                        <div class="editorial-story-meta">
                            <span class="editorial-meta-category">Local Offices</span>
                            <span class="editorial-meta-sep">&bull;</span>
                            <span class="editorial-meta-date">January 5, 2026</span>
                        </div>
                        <h3 class="editorial-story-headline">Prescott to Lead Augusta Public Defender Office</h3>
                        <p class="editorial-story-excerpt">The Georgia Public Defender Council has appointed Lee Prescott as the new Circuit Public Defender for the Augusta Judicial Circuit, which encompasses Richmond and Burke counties.</p>
                        <div class="editorial-story-footer">
                            <span class="editorial-meta-read">1 min read</span>
                            <span class="editorial-read-btn">Read Article <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></span>
                        </div>
                    </div>
                </a>

                <a href="articles/mark-alexander-northeastern-circuit.html" class="editorial-story">
                    <div class="editorial-story-image">
                        <img loading="lazy" src="https://gapubdef.org/wp-content/uploads/Alexander_Mark_Photo.jpg" alt="Mark Alexander, Circuit Public Defender for Northeastern Judicial Circuit" style="object-position: center center">
                    </div>
                    <div class="editorial-story-body">
                        <div class="editorial-story-meta">
                            <span class="editorial-meta-category">Local Offices</span>
                            <span class="editorial-meta-sep">&bull;</span>
                            <span class="editorial-meta-date">September 16, 2025</span>
                        </div>
                        <h3 class="editorial-story-headline">Mark Alexander Appointed Circuit Public Defender for Northeastern Judicial Circuit</h3>
                        <p class="editorial-story-excerpt">Mark Alexander has been named the new Circuit Public Defender for the Northeastern Judicial Circuit, bringing more than three decades of courtroom experience to a role that carries significant responsibility for indigent defense in the region.</p>
                        <div class="editorial-story-footer">
                            <span class="editorial-meta-read">1 min read</span>
                            <span class="editorial-read-btn">Read Article <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></span>
                        </div>
                    </div>
                </a>

                <a href="articles/dekalb-to-kenya-training.html" class="editorial-story">
                    <div class="editorial-story-image">
                        <img loading="lazy" src="https://gapubdef.org/wp-content/uploads/Faculty-1024x768.jpeg" alt="Training faculty members in Kenya">
                    </div>
                    <div class="editorial-story-body">
                        <div class="editorial-story-meta">
                            <span class="editorial-meta-category">Training</span>
                            <span class="editorial-meta-sep">&bull;</span>
                            <span class="editorial-meta-date">August 20, 2025</span>
                        </div>
                        <h3 class="editorial-story-headline">From DeKalb to Kenya: Public Defenders Deliver Training Behind Bars</h3>
                        <p class="editorial-story-excerpt">Two members of Georgia's public defense community traveled to Kenya to deliver courtroom skills training inside correctional facilities, marking a notable international collaboration in access-to-justice efforts.</p>
                        <div class="editorial-story-footer">
                            <span class="editorial-meta-read">1 min read</span>
                            <span class="editorial-read-btn">Read Article <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></span>
                        </div>
                    </div>
                </a>
            </div>

            
            <!-- Bottom rule + CTA -->
            <div class="editorial-footer fade-in">
                <div class="editorial-rule"></div>
                <a href="newsroom.html" class="editorial-more-link">
                    <span>All Stories</span>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
        </div>
    </section>

    <!-- Events Section — Timeline -->
    <section class="events-timeline-section">
        <div class="container">
            <div class="section-header centered fade-in">
                <p class="label">WHAT'S NEXT</p>
                <h2 class="section-title">Upcoming Events</h2>
            </div>

            <div id="homeEventsTimeline" class="fade-in">
                <!-- Events will be generated by JavaScript -->
            </div>

            <div class="events-timeline-footer fade-in">
                <a href="divisions/training.html#events" class="editorial-more-link">
                    <span>Full Calendar</span>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
        </div>
    </section>

    <style>
        /* ==================== EDITORIAL NEWSROOM ==================== */
        .editorial-newsroom {
            background: var(--bg-white);
            padding: 4rem 1.5rem 3rem;
        }

        .editorial-rule {
            height: 1px;
            background: var(--text-dark);
            opacity: 0.12;
        }

        /* — Featured Lead Story — */
        .editorial-lead {
            display: block;
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 2rem;
            text-decoration: none;
            color: inherit;
            aspect-ratio: 16 / 8;
        }

        .editorial-lead-image {
            position: absolute;
            inset: 0;
        }

        .editorial-lead-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center top;
            transition: transform 0.8s var(--ease-out);
        }

        .editorial-lead:hover .editorial-lead-image img {
            transform: scale(1.04);
        }

        .editorial-lead-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(
                to top,
                rgba(15, 15, 15, 0.92) 0%,
                rgba(15, 15, 15, 0.55) 50%,
                rgba(15, 15, 15, 0.02) 100%
            );
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 2.5rem;
        }

        .editorial-badge {
            display: inline-block;
            width: fit-content;
            padding: 0.3rem 0.875rem;
            background: var(--primary);
            color: white;
            font-family: 'Manrope', sans-serif;
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border-radius: 50px;
            margin-bottom: 1rem;
        }

        .editorial-lead-headline {
            font-family: 'Ubuntu', sans-serif;
            font-size: 2.5rem;
            font-weight: 500;
            color: white;
            line-height: 1.2;
            margin-bottom: 0.75rem;
            max-width: 700px;
        }

        .editorial-lead-meta {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
        }

        .editorial-meta-category {
            font-family: 'Manrope', sans-serif;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--primary-light);
        }

        .editorial-lead-meta .editorial-meta-category {
            color: rgba(255, 255, 255, 0.7);
        }

        .editorial-meta-sep {
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.5rem;
        }

        .editorial-meta-date {
            font-family: 'Manrope', sans-serif;
            font-size: 0.75rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.6);
        }

        .editorial-meta-read {
            font-family: 'Manrope', sans-serif;
            font-size: 0.7rem;
            font-weight: 500;
            color: var(--text-light);
        }

        .editorial-lead-meta .editorial-meta-read {
            color: rgba(255, 255, 255, 0.45);
        }

        .editorial-lead-excerpt {
            font-size: 0.95rem;
            line-height: 1.65;
            color: rgba(255, 255, 255, 0.72);
            max-width: 600px;
            font-family: 'Manrope', sans-serif;
            margin-bottom: 1rem;
        }

        .editorial-lead-read-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            width: fit-content;
            padding: 0.55rem 1.5rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            font-family: 'Manrope', sans-serif;
            font-size: 0.8rem;
            font-weight: 600;
            border-radius: 50px;
            box-shadow: var(--shadow-btn);
            transition: all 0.3s var(--ease-out);
        }

        .editorial-lead-read-btn svg {
            width: 14px;
            height: 14px;
            transition: transform 0.3s var(--ease-out);
        }

        .editorial-lead:hover .editorial-lead-read-btn {
            transform: translateY(-2px);
            box-shadow: var(--shadow-btn-hover);
        }

        .editorial-lead:hover .editorial-lead-read-btn svg {
            transform: translateX(3px);
        }

        /* — Secondary Stories Grid — */
        .editorial-secondary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .editorial-story {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: inherit;
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.4s var(--ease-out), box-shadow 0.4s var(--ease-out);
            background: var(--bg-light);
        }

        .editorial-story:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .editorial-story-image {
            position: relative;
            height: 180px;
            overflow: hidden;
        }

        .editorial-story-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s var(--ease-out);
        }

        .editorial-story:hover .editorial-story-image img {
            transform: scale(1.05);
        }

        .editorial-story-body {
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .editorial-story-meta {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin-bottom: 0.5rem;
        }

        .editorial-story-meta .editorial-meta-sep {
            color: var(--text-light);
            font-size: 0.5rem;
        }

        .editorial-story-meta .editorial-meta-date {
            color: var(--text-light);
        }

        .editorial-story-headline {
            font-family: 'Ubuntu', sans-serif;
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text-dark);
            line-height: 1.35;
            margin-bottom: 0.5rem;
            transition: color 0.3s var(--ease-out);
        }

        .editorial-story:hover .editorial-story-headline {
            color: var(--primary);
        }

        .editorial-story-excerpt {
            font-size: 0.8125rem;
            color: var(--text-medium);
            line-height: 1.6;
            margin-bottom: 0.75rem;
            flex: 1;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* — Story footer: read time + Read Article link — */
        .editorial-story-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: auto;
            padding-top: 0.625rem;
            border-top: 1px solid var(--border-light);
        }

        .editorial-read-btn {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-family: 'Manrope', sans-serif;
            font-size: 0.6875rem;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.3s var(--ease-out);
        }

        .editorial-read-btn svg {
            width: 12px;
            height: 12px;
            transition: transform 0.3s var(--ease-out);
        }

        .editorial-story:hover .editorial-read-btn {
            color: var(--primary);
        }

        .editorial-story:hover .editorial-read-btn svg {
            transform: translateX(3px);
        }

        /* — Footer / CTA — */
        .editorial-footer {
            text-align: center;
        }

        .editorial-footer .editorial-rule {
            margin-bottom: 1.5rem;
        }

        .editorial-more-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Manrope', sans-serif;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: var(--text-dark);
            text-decoration: none;
            transition: color 0.3s var(--ease-out);
        }

        .editorial-more-link:hover {
            color: var(--primary);
        }

        .editorial-more-link svg {
            width: 16px;
            height: 16px;
        }

        /* — Responsive — */
        @media (max-width: 1024px) {
            .editorial-lead-headline {
                font-size: 2rem;
            }

            .editorial-lead-excerpt {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 900px) {
            .editorial-secondary {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .editorial-story {
                flex-direction: row;
                border-radius: 12px;
            }

            .editorial-story-image {
                width: 160px;
                min-width: 160px;
                height: auto;
                min-height: 140px;
            }

            .editorial-lead {
                aspect-ratio: 16 / 10;
            }

            .editorial-lead-headline {
                font-size: 1.75rem;
            }
        }

        @media (max-width: 640px) {
            .editorial-lead {
                aspect-ratio: 4 / 5;
                border-radius: 12px;
            }

            .editorial-lead-overlay {
                padding: 1.5rem;
            }

            .editorial-lead-headline {
                font-size: 1.5rem;
            }

            .editorial-lead-excerpt {
                font-size: 0.85rem;
                display: -webkit-box;
                -webkit-line-clamp: 3;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }

            .editorial-story {
                flex-direction: column;
            }

            .editorial-story-image {
                width: 100%;
                min-width: unset;
                height: 180px;
            }
        }

        /* ==================== EVENTS — MODERN CARDS ==================== */
        .events-timeline-section {
            background: var(--bg-light);
            padding: 4rem 1.5rem 3rem;
        }

        .events-timeline {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.25rem;
            margin-bottom: 2.5rem;
            align-items: stretch;
        }

        .events-timeline > .evt-card {
            height: 100%;
        }

        /* Single event card */
        .evt-card {
            background: var(--bg-white);
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: inherit;
            transition: all 0.4s var(--ease-out);
            box-shadow: var(--shadow-sm);
            position: relative;
            cursor: pointer;
        }

        .evt-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        /* Image banner */
        .evt-card-image {
            position: relative;
            height: 170px;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        }

        .evt-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s var(--ease-out);
        }

        .evt-card:hover .evt-card-image img {
            transform: scale(1.06);
        }

        /* Date chip — floats over the image */
        .evt-date-chip {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: white;
            border-radius: 10px;
            padding: 0.5rem 0.75rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            min-width: 56px;
        }

        .evt-date-chip-month {
            font-family: 'Manrope', sans-serif;
            font-size: 0.6rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--primary);
            line-height: 1;
        }

        .evt-date-chip-day {
            font-family: 'Ubuntu', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-dark);
            line-height: 1.1;
        }

        /* Type badge on image */
        .evt-type-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: inline-block;
            padding: 0.25rem 0.65rem;
            font-family: 'Manrope', sans-serif;
            font-size: 0.6rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            border-radius: 50px;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .evt-type-badge.in-person {
            background: white;
            color: var(--primary);
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .evt-type-badge.hybrid {
            background: white;
            color: #3884b8;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .evt-type-badge.on-demand {
            background: white;
            color: #3d8c3d;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        /* Card body */
        .evt-card-body {
            padding: 1.25rem 1.25rem 1.5rem;
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .evt-title {
            font-family: 'Ubuntu', sans-serif;
            font-size: 1.125rem;
            font-weight: 500;
            color: var(--text-dark);
            line-height: 1.3;
            margin-bottom: 0.5rem;
            transition: color 0.3s var(--ease-out);
        }

        .evt-card:hover .evt-title {
            color: var(--primary);
        }

        .evt-detail-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-bottom: 0.75rem;
        }

        .evt-detail {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            font-family: 'Manrope', sans-serif;
            font-size: 0.75rem;
            color: var(--text-light);
            font-weight: 500;
        }

        .evt-detail svg {
            width: 13px;
            height: 13px;
            flex-shrink: 0;
        }

        .evt-card-desc {
            font-size: 0.8125rem;
            color: var(--text-medium);
            line-height: 1.6;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 1rem;
            flex: 1;
        }

        .evt-actions {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-top: auto;
        }

        .evt-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.5rem 1.25rem;
            font-family: 'Manrope', sans-serif;
            font-size: 0.8rem;
            font-weight: 600;
            border-radius: 50px;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s var(--ease-out);
            border: none;
        }

        .evt-btn svg {
            width: 14px;
            height: 14px;
        }

        .evt-btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: var(--shadow-btn);
        }

        .evt-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-btn-hover);
        }

        .evt-btn-outline {
            background: none;
            color: var(--text-medium);
            border: 1.5px solid var(--border-light);
        }

        .evt-btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: var(--primary-subtle);
        }

        /* Details button — pill badge style */
        .evt-btn-details {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
            padding: 0.5rem 1.125rem;
            border-radius: 50px;
            font-family: 'Manrope', sans-serif;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s var(--ease-out);
            text-decoration: none;
            border: 1.5px solid var(--border-light);
            background: var(--bg-light);
            color: var(--text-medium);
            white-space: nowrap;
            -webkit-tap-highlight-color: transparent;
        }

        .evt-btn-details:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: var(--primary-subtle);
        }

        .evt-btn-details svg {
            width: 14px;
            height: 14px;
        }

        /* Calendar Dropdown */
        .evt-calendar-dropdown {
            position: relative;
            display: inline-flex;
        }

        .evt-calendar-dropdown-menu {
            display: none;
            position: absolute;
            bottom: calc(100% + 6px);
            left: 0;
            background: var(--bg-white);
            border: 1.5px solid var(--border-light);
            border-radius: 10px;
            box-shadow: var(--shadow-md);
            min-width: 200px;
            z-index: 20;
            overflow: hidden;
        }

        .evt-calendar-dropdown-menu.active {
            display: block;
        }

        .evt-calendar-dropdown-menu a {
            display: flex;
            align-items: center;
            gap: 0.625rem;
            padding: 0.625rem 1rem;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-dark);
            text-decoration: none;
            transition: background 0.15s ease;
        }

        .evt-calendar-dropdown-menu a:hover {
            background: var(--primary-subtle, #fef3f0);
            color: var(--primary);
        }

        .evt-calendar-dropdown-menu a + a {
            border-top: 1px solid var(--border-light);
        }

        .evt-calendar-dropdown-menu svg {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        /* Footer */
        .events-timeline-footer {
            text-align: center;
            padding-top: 1.5rem;
        }

        /* ==================== EVENT MODAL ==================== */
        .event-modal-overlay {
            position: fixed;
            inset: 0;
            z-index: 9999;
            background: rgba(0, 0, 0, 0.45);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.35s ease, visibility 0.35s ease;
        }

        .event-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .event-modal {
            background: var(--bg-white);
            border-radius: 16px;
            max-width: 520px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 24px 80px rgba(0, 0, 0, 0.2);
            transform: translateY(20px) scale(0.97);
            transition: transform 0.35s var(--ease-out);
        }

        .event-modal-overlay.active .event-modal {
            transform: translateY(0) scale(1);
        }

        .event-modal-close {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            width: 36px;
            height: 36px;
            border: none;
            background: rgba(0,0,0,0.35);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.25s ease;
            color: white;
            min-height: 36px;
            min-width: 36px;
            -webkit-tap-highlight-color: transparent;
        }

        .event-modal-close:hover {
            background: rgba(0,0,0,0.55);
            color: white;
        }

        .event-modal-close svg {
            width: 18px;
            height: 18px;
        }

        .event-modal-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 16px 16px 0 0;
        }

        .event-modal-body {
            padding: 1.5rem;
        }

        .event-modal-body .evt-type-badge {
            margin-bottom: 0.75rem;
        }

        .event-modal-body h2 {
            font-size: 1.375rem;
            color: var(--text-dark);
            margin-bottom: 1rem;
            line-height: 1.25;
        }

        .event-modal-meta {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1.25rem;
        }

        .event-modal-meta-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-medium);
        }

        .event-modal-meta-item svg {
            width: 18px;
            height: 18px;
            color: var(--primary);
            flex-shrink: 0;
            margin-top: 2px;
        }

        .event-modal-meta-item strong {
            color: var(--text-dark);
            font-weight: 600;
        }

        .event-modal-description {
            font-size: 0.875rem;
            color: var(--text-medium);
            line-height: 1.7;
            margin-bottom: 1.5rem;
            padding-top: 0.875rem;
            border-top: 1px solid var(--border-light);
        }

        .event-modal-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .event-modal-actions .modal-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.625rem 1.25rem;
            border-radius: 50px;
            font-size: 0.8125rem;
            font-weight: 600;
            font-family: 'Manrope', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            border: none;
            min-height: 44px;
            -webkit-tap-highlight-color: transparent;
        }

        .event-modal-actions .modal-btn svg {
            width: 16px;
            height: 16px;
        }

        .event-modal-actions .modal-btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: var(--shadow-btn);
        }

        .event-modal-actions .modal-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-btn-hover);
        }

        .event-modal-actions .modal-btn-secondary {
            background: var(--bg-light);
            color: var(--text-medium);
            border: 1.5px solid var(--border-light);
        }

        .event-modal-actions .modal-btn-secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: var(--primary-subtle);
        }

        /* Modal calendar dropdown */
        .modal-calendar-dropdown {
            position: relative;
            display: inline-flex;
        }

        .modal-calendar-dropdown-menu {
            display: none;
            position: absolute;
            bottom: calc(100% + 6px);
            left: 0;
            background: var(--bg-white);
            border: 1.5px solid var(--border-light);
            border-radius: 10px;
            box-shadow: var(--shadow-md);
            min-width: 200px;
            z-index: 20;
            overflow: hidden;
        }

        .modal-calendar-dropdown-menu.active {
            display: block;
        }

        .modal-calendar-dropdown-menu a {
            display: flex;
            align-items: center;
            gap: 0.625rem;
            padding: 0.625rem 1rem;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-dark);
            text-decoration: none;
            transition: background 0.15s ease;
        }

        .modal-calendar-dropdown-menu a:hover {
            background: var(--primary-subtle, #fef3f0);
            color: var(--primary);
        }

        .modal-calendar-dropdown-menu a + a {
            border-top: 1px solid var(--border-light);
        }

        .modal-calendar-dropdown-menu svg {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        /* — Responsive — */
        @media (max-width: 900px) {
            .events-timeline {
                grid-template-columns: 1fr;
            }

            .event-modal {
                max-height: 90vh;
                border-radius: 16px 16px 0 0;
                margin-top: auto;
            }

            .event-modal-overlay {
                align-items: flex-end;
                padding: 0;
            }

            .event-modal-body {
                padding: 1.25rem;
            }
        }

        @media (max-width: 640px) {
            .evt-card-image {
                height: 150px;
            }

            .evt-title {
                font-size: 1rem;
            }

            .event-modal-actions {
                flex-direction: column;
            }

            .event-modal-actions .modal-btn {
                width: 100%;
            }
        }
    </style>

    <!-- Event Detail Modal -->
    <div class="event-modal-overlay" id="homeEventModalOverlay">
        <div class="event-modal" id="homeEventModal">
            <button class="event-modal-close" id="homeEventModalClose" aria-label="Close modal">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
            <div id="homeEventModalContent"></div>
        </div>
    </div>

    <!-- Footer (loaded dynamically) -->
    <div id="site-footer"></div>

    <script src="js/components.js?v=3"></script>
    <script src="js/main.js"></script>
    <script src="js/events-data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var container = document.getElementById('homeEventsTimeline');
            if (!container) return;

            var upcomingEvents = getUpcomingEvents(4);
            var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];

            if (upcomingEvents.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-light); padding: 2rem 0;">No upcoming events. Check back soon!</p>';
                return;
            }

            function fmtGCal(d) {
                return d.getFullYear() + String(d.getMonth()+1).padStart(2,'0') + String(d.getDate()).padStart(2,'0')
                    + 'T' + String(d.getHours()).padStart(2,'0') + String(d.getMinutes()).padStart(2,'0') + '00';
            }

            function formatICSDate(date) {
                var y = date.getFullYear();
                var m = String(date.getMonth() + 1).padStart(2, '0');
                var dd = String(date.getDate()).padStart(2, '0');
                var h = String(date.getHours()).padStart(2, '0');
                var min = String(date.getMinutes()).padStart(2, '0');
                var s = String(date.getSeconds()).padStart(2, '0');
                return y + m + dd + 'T' + h + min + s;
            }

            function buildOutlookUrl(evt) {
                var start = evt.date.toISOString();
                var end = evt.endDate
                    ? evt.endDate.toISOString()
                    : new Date(evt.date.getTime() + 2 * 60 * 60 * 1000).toISOString();
                return 'https://outlook.live.com/calendar/0/action/compose'
                    + '?subject=' + encodeURIComponent(evt.title)
                    + '&startdt=' + start
                    + '&enddt=' + end
                    + '&location=' + encodeURIComponent(evt.location)
                    + '&body=' + encodeURIComponent(evt.description);
            }

            window.homeDownloadICS = function(eventId) {
                var evt = upcomingEvents.find(function(e) { return e.id === eventId; });
                if (!evt) return;
                var start = formatICSDate(evt.date);
                var end = evt.endDate
                    ? formatICSDate(evt.endDate)
                    : formatICSDate(new Date(evt.date.getTime() + 2 * 60 * 60 * 1000));
                var ics = 'BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:-//GPDC//Events//EN\r\n'
                    + 'BEGIN:VEVENT\r\n'
                    + 'DTSTART:' + start + '\r\n'
                    + 'DTEND:' + end + '\r\n'
                    + 'SUMMARY:' + evt.title + '\r\n'
                    + 'LOCATION:' + evt.location + '\r\n'
                    + 'DESCRIPTION:' + evt.description + '\r\n'
                    + 'END:VEVENT\r\n'
                    + 'END:VCALENDAR';
                var blob = new Blob([ics], { type: 'text/calendar;charset=utf-8' });
                var url = URL.createObjectURL(blob);
                var a = document.createElement('a');
                a.href = url;
                a.download = evt.title.replace(/[^a-zA-Z0-9]/g, '-').toLowerCase() + '.ics';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            window.toggleHomeCalDropdown = function(btn) {
                var menu = btn.parentElement.querySelector('.evt-calendar-dropdown-menu');
                var isActive = menu.classList.contains('active');
                document.querySelectorAll('.evt-calendar-dropdown-menu.active').forEach(function(m) {
                    m.classList.remove('active');
                });
                if (!isActive) {
                    menu.classList.add('active');
                }
            };

            document.addEventListener('click', function(e) {
                if (!e.target.closest('.evt-calendar-dropdown')) {
                    document.querySelectorAll('.evt-calendar-dropdown-menu.active').forEach(function(m) {
                        m.classList.remove('active');
                    });
                }
            });

            var html = '<div class="events-timeline">';
            upcomingEvents.forEach(function(event) {
                var d = event.date;
                var month = months[d.getMonth()];
                var day = d.getDate();

                // Date range text
                var dateStr = d.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
                if (event.endDate && d.toDateString() !== event.endDate.toDateString()) {
                    dateStr += ' – ' + event.endDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric' });
                }

                // Time
                var timeStr = '';
                if (d.getHours() !== 0 || d.getMinutes() !== 0) {
                    timeStr = d.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
                    if (event.endDate && d.toDateString() === event.endDate.toDateString()) {
                        timeStr += ' – ' + event.endDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
                    }
                }

                // Type
                var typeClass = (event.type || 'in-person').replace(/\s/g, '-');
                var typeLabel = event.type ? event.type.replace(/-/g, ' ') : 'In Person';

                // GCal URL
                var gcStart = fmtGCal(d);
                var gcEnd = event.endDate ? fmtGCal(event.endDate) : fmtGCal(new Date(d.getTime() + 7200000));
                var gcUrl = 'https://calendar.google.com/calendar/render?action=TEMPLATE'
                    + '&text=' + encodeURIComponent(event.title)
                    + '&dates=' + gcStart + '/' + gcEnd
                    + '&location=' + encodeURIComponent(event.location)
                    + '&details=' + encodeURIComponent(event.description);

                // Image or gradient fallback
                var imgHtml = event.image
                    ? '<img loading="lazy" src="' + event.image + '" alt="' + event.title + '">'
                    : '';

                // Register
                var registerHtml = (event.registerUrl && event.registerUrl !== '#')
                    ? '<a href="' + event.registerUrl + '" target="_blank" rel="noopener" class="evt-btn evt-btn-primary" onclick="event.stopPropagation();">'
                      + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"/></svg>'
                      + 'Register</a>'
                    : '';

                // Outlook URL
                var outlookUrl = buildOutlookUrl(event);

                // Calendar dropdown
                var calendarHtml = '<div class="evt-calendar-dropdown" onclick="event.stopPropagation();">'
                    + '<button class="evt-btn evt-btn-outline" onclick="event.stopPropagation(); toggleHomeCalDropdown(this);">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>'
                    + 'Add to Calendar</button>'
                    + '<div class="evt-calendar-dropdown-menu">'
                    + '<a href="' + gcUrl + '" target="_blank" rel="noopener">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>'
                    + 'Google Calendar</a>'
                    + '<a href="' + outlookUrl + '" target="_blank" rel="noopener">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="18" rx="2"/><path d="M8 7v10M16 7v10M2 12h20"/></svg>'
                    + 'Outlook Calendar</a>'
                    + '<a href="javascript:void(0)" onclick="event.stopPropagation(); homeDownloadICS(' + event.id + ');">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 110 20 10 10 0 010-20z"/><path d="M12 8v8M8 12l4 4 4-4"/></svg>'
                    + 'Apple Calendar (.ics)</a>'
                    + '</div></div>';

                // Details button — pill badge style, opens modal
                var detailsHtml = '<button class="evt-btn-details" onclick="event.stopPropagation(); openHomeEventModal(' + event.id + ');">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>'
                    + 'Details</button>';

                html += '<div class="evt-card" onclick="openHomeEventModal(' + event.id + ');">'
                    + '<div class="evt-card-image">'
                    + imgHtml
                    + '<div class="evt-date-chip"><div class="evt-date-chip-month">' + month + '</div><div class="evt-date-chip-day">' + day + '</div></div>'
                    + '<span class="evt-type-badge ' + typeClass + '">' + typeLabel + '</span>'
                    + '</div>'
                    + '<div class="evt-card-body">'
                    + '<div class="evt-title">' + event.title + '</div>'
                    + '<div class="evt-detail-row">'
                    + '<span class="evt-detail"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>' + event.location + '</span>'
                    + '<span class="evt-detail"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>' + dateStr + '</span>'
                    + (timeStr ? '<span class="evt-detail"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>' + timeStr + '</span>' : '')
                    + '</div>'
                    + '<p class="evt-card-desc">' + event.description + '</p>'
                    + '<div class="evt-actions">'
                    + registerHtml
                    + detailsHtml
                    + calendarHtml
                    + '</div>'
                    + '</div>'
                    + '</div>';
            });
            html += '</div>';

            container.innerHTML = html;

            // ==================== EVENT DETAIL MODAL ====================
            var modalOverlay = document.getElementById('homeEventModalOverlay');
            var modalCloseBtn = document.getElementById('homeEventModalClose');

            modalCloseBtn.addEventListener('click', closeHomeEventModal);
            modalOverlay.addEventListener('click', function(e) {
                if (e.target === modalOverlay) closeHomeEventModal();
            });
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modalOverlay.classList.contains('active')) closeHomeEventModal();
            });

            window.openHomeEventModal = function(eventId) {
                var evt = upcomingEvents.find(function(e) { return e.id === eventId; });
                if (!evt) return;

                var content = document.getElementById('homeEventModalContent');

                var typeClass = (evt.type || 'in-person').replace(/\s/g, '-');
                var typeLabel = evt.type ? evt.type.split('-').map(function(w) {
                    return w.charAt(0).toUpperCase() + w.slice(1);
                }).join(' ') : 'In Person';

                var dateOpts = { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' };
                var dateStr = evt.date.toLocaleDateString('en-US', dateOpts);

                var timeStr = '';
                if (evt.date.getHours() !== 0 || evt.date.getMinutes() !== 0) {
                    timeStr = evt.date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
                    if (evt.endDate && (evt.endDate.getHours() !== 0 || evt.endDate.getMinutes() !== 0)) {
                        if (evt.date.toDateString() === evt.endDate.toDateString()) {
                            timeStr += ' - ' + evt.endDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
                        }
                    }
                }

                if (evt.endDate && evt.date.toDateString() !== evt.endDate.toDateString()) {
                    dateStr += ' - ' + evt.endDate.toLocaleDateString('en-US', dateOpts);
                }

                var imageHtml = evt.image
                    ? '<img class="event-modal-image" src="' + evt.image + '" alt="' + evt.title + '">'
                    : '';

                var gcStart = fmtGCal(evt.date);
                var gcEnd = evt.endDate ? fmtGCal(evt.endDate) : fmtGCal(new Date(evt.date.getTime() + 7200000));
                var gcUrl = 'https://calendar.google.com/calendar/render?action=TEMPLATE'
                    + '&text=' + encodeURIComponent(evt.title)
                    + '&dates=' + gcStart + '/' + gcEnd
                    + '&location=' + encodeURIComponent(evt.location)
                    + '&details=' + encodeURIComponent(evt.description);

                var registerBtn = (evt.registerUrl && evt.registerUrl !== '#')
                    ? '<a href="' + evt.registerUrl + '" target="_blank" rel="noopener" class="modal-btn modal-btn-primary">'
                        + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"/></svg>'
                        + '<span>Register</span></a>'
                    : '';

                content.innerHTML = imageHtml
                    + '<div class="event-modal-body">'
                    + '<span class="evt-type-badge ' + typeClass + '">' + typeLabel + '</span>'
                    + '<h2>' + evt.title + '</h2>'
                    + '<div class="event-modal-meta">'
                    + '<div class="event-modal-meta-item">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>'
                    + '<div><strong>' + dateStr + '</strong>' + (timeStr ? '<br>' + timeStr : '') + '</div>'
                    + '</div>'
                    + '<div class="event-modal-meta-item">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>'
                    + '<div>' + evt.location + '</div>'
                    + '</div>'
                    + '</div>'
                    + '<p class="event-modal-description">' + evt.description + '</p>'
                    + '<div class="event-modal-actions">'
                    + registerBtn
                    + '<div class="modal-calendar-dropdown">'
                    + '<button class="modal-btn modal-btn-secondary" onclick="event.stopPropagation(); toggleModalCalDropdown(this)">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>'
                    + '<span>Add to Calendar</span></button>'
                    + '<div class="modal-calendar-dropdown-menu">'
                    + '<a href="' + gcUrl + '" target="_blank" rel="noopener">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>'
                    + 'Google Calendar</a>'
                    + '<a href="' + buildOutlookUrl(evt) + '" target="_blank" rel="noopener">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="18" rx="2"/><path d="M8 7v10M16 7v10M2 12h20"/></svg>'
                    + 'Outlook</a>'
                    + '<a href="javascript:void(0)" onclick="event.stopPropagation(); homeDownloadICS(' + evt.id + ')">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 110 20 10 10 0 010-20z"/><path d="M12 8v8M8 12l4 4 4-4"/></svg>'
                    + 'Apple Calendar (.ics)</a>'
                    + '</div></div>'
                    + '<button class="modal-btn modal-btn-secondary" onclick="shareHomeEvent(' + evt.id + ')">'
                    + '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><path d="M8.59 13.51l6.83 3.98M15.41 6.51l-6.82 3.98"/></svg>'
                    + '<span>Share</span></button>'
                    + '</div></div>';

                modalOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            };

            function closeHomeEventModal() {
                modalOverlay.classList.remove('active');
                document.body.style.overflow = '';
            }

            window.toggleModalCalDropdown = function(btn) {
                var menu = btn.parentElement.querySelector('.modal-calendar-dropdown-menu');
                var isActive = menu.classList.contains('active');
                document.querySelectorAll('.modal-calendar-dropdown-menu.active').forEach(function(m) {
                    m.classList.remove('active');
                });
                if (!isActive) {
                    menu.classList.add('active');
                }
            };

            window.shareHomeEvent = function(eventId) {
                var evt = upcomingEvents.find(function(e) { return e.id === eventId; });
                if (!evt) return;
                var shareData = {
                    title: evt.title,
                    text: evt.title + ' - ' + evt.date.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) + ' at ' + evt.location,
                    url: window.location.href
                };
                if (navigator.share) {
                    navigator.share(shareData).catch(function() {});
                } else {
                    var text = shareData.text + '\n' + shareData.url;
                    navigator.clipboard.writeText(text).then(function() {
                        var btn = document.querySelector('.event-modal-actions button[onclick*="shareHomeEvent"]');
                        if (btn) {
                            var original = btn.innerHTML;
                            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg><span>Copied!</span>';
                            setTimeout(function() { btn.innerHTML = original; }, 2000);
                        }
                    }).catch(function() {});
                }
            };
        });
    </script>
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
</body>
</html>
